

<h2 id="4.1">Web安全</h2>


```
  Web安全主要分为客户端脚本安全和服务器端应用安全。

  客户端脚本安全主要包括浏览器安全、跨站脚本攻击(XSS)、跨站点请求伪造(CSRF)、点击劫持(ClickJacking)、HTML5安全；


  服务端安全主要包括

  注入攻击：SQL注入、XML注入、代码注入、CRLF注入等
  
  文件上传漏洞：如FCKEditor上传、绕过文件上传检查功能；
  
  PHP安全：一般会和文件含漏洞、变量覆盖漏洞、代码执行漏洞；

  认证与会话管理、访问控制、加密算法与随机数、Web框架安全、应用层拒绝服务攻击、Web Server配置安全等

  浏览器端主要涉及：同源策略、沙箱等

```




#### 常见web安全及防护原理

> sql注入原理

```
  就是通过把SQL命令插入到Web表单递交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。

  总的来说有以下几点：

    1.永远不要信任用户的输入，要对用户的输入进行校验，可以通过正则表达式，或限制长度，对单引号和双"-"进行转换等。

    2.永远不要使用动态拼装SQL，可以使用参数化的SQL或者直接使用存储过程进行数据查询存取。

    3.永远不要使用管理员权限的数据库连接，为每个应用使用单独的权限有限的数据库连接。

    4.不要把机密信息明文存放，请加密或者hash掉密码和敏感的信息。
```


> XSS原理及防范

```
    Xss(cross-site scripting)攻击指的是攻击者往Web页面里插入恶意  html 标签或者 javascript 代码。比如：攻击者在论坛中放一个

    看似安全的链接，骗取用户点击后，窃取 cookie 中的用户私密信息；或者攻击者在论坛中加一个恶意表单，

    当用户提交表单的时候，却把信息传送到攻击者的服务器中，而不是用户原本以为的信任站点。
```


> XSS防范方法

```
    首先代码里对用户输入的地方和变量都需要仔细检查长度和对`”<”,”>”,”;”,”’”`等字符做过滤；

    其次任何内容写到页面之前都必须加以 encode ，避免不小心把 html tag  弄出来。这一个层面做好，至少可以堵住超过一半的 XSS  攻击。

    首先，避免直接在 cookie  中泄露用户隐私，例如email、密码等等。

    其次，通过使 cookie  和系统 ip 绑定来降低 cookie  泄露后的危险。这样攻击者得到的 cookie  没有实际价值，不可能拿来重放。

    如果网站不需要再浏览器端对 cookie  进行操作，可以在 Set-Cookie  末尾加上 HttpOnly  来防止 javascript  代码直接获取 cookie  。


    cookie 增加安全性

    secure
    HttpOnly
  

    尽量采用 POST 而非 GET 提交表单

```



> XSS与CSRF有什么区别吗？

```
    XSS是获取信息，不需要提前知道其他用户页面的代码和数据包。CSRF是代替用户完成指定的动作，需要知道其他用户页面的代码和数据包。

    要完成一次 CSRF 攻击，受害者必须依次完成两个步骤：

    登录受信任网站A，并在本地生成Cookie。

    在不登出A的情况下，访问危险网站B。
```


> CSRF的防御

```
    服务端的 CSRF 方式方法很多样，但总的思想都是一致的，就是在客户端页面增加伪随机数。

    通过验证码的方法
```





##### Final

> 不断更新中…… 如果发现问题欢迎在 [issues](https://github.com/Aierui/web-develope-questions/issues) 中指出。如果有比较好的问题/知识点/指正，也欢迎提 PR。

