### ElemeFE(实习) 面试

#### 一面

> 2017-05-23 11:03 - 11:56 (约53分钟) 语音面、以HTML/CSS/JS/ES6/Node/HTTP等简单基础知识为主。

- 简单自我介绍

- 自我学习方式？

- 最近在看的书？

- 看过哪些源代码？

- 元素横向排列方法？

- flex 语法、各属性？

- 盒子模型、相互之间区别？

- 定位类型有，相互之间的区别？

- 清楚浮动方法？

- js 的基本数据类型？

- JSON 的好处？

- JSON 的字符串如何转为对象？

- js 事件的传播阶段？

- 如何阻止事件冒泡？

- 取消对当前事件的默认行为？

- 创建节点、添加、移除、替换、插入等的方法？

- 查找节点的方法？

- document.getElementsByName() 返回值？

- 说下 js 原型链？

- js 原型链的继承？

- 严格模式下会有哪些不同？

- call、apply、bind 作用和区别？

- BOM、DOM 是，之间区别？

- let、var的区别？

- ES6 箭头函数好处？

- ES6 模块的设计于 CommonJS 的不同？

- js 标签为什么要写在 body 标签闭合之前？

- HTTP 常见状态码及其含义？

- HTTP header中，和缓存相关的字段有？

- HTTP 状态码 304 的原理是？

- 跨域解决方案？

- js、css、img等静态资源打包的好处是？

- 你有没有什么问题想问我的？





### 2018 校招

#### 2018饿了么校园招聘核心竞争力题目第一轮

> 某类似于淘宝网的互联网销售平台为了挽留流失用户，需要对流失用户进行红包刺激，最终目的是为了提高日活用户数. 假设现有一百万元的红包总金额预算, 请你建立一个流失用户预测模型，并制定红包发放策略；请说明：


1、你对流失用户的定义与建模流程；
2、你所选择的特征（提示：用户历史消费信息，订单量、订单金额等）；
3、确定最终流失用户红包的发放对象和你的第一个红包分配方案(给哪些用户发红包, 以及红包金额)；
4、有没有更好的红包刺激模型? 请给出你的第二个红包分配方案。
5、如何评价与比较你开发的两个红包分配方案?



场景：电商平台用户防流失，提高日活用户数
预算：100W
周期：视用户数量而定(用户多，一天就发完了；用户少，也许需要一个月) 如果淘宝级别的，那一天花1000W也不够
需求：建立一个流失用户预测模型，并制定红包发放策略


在分析防流失用户类型前，我们先看看一个APP的用户生命周期，可以根据用户的使用时长、登录次数、购买次数、购买能力、购买频率等将其分为四个阶段：接触适应期、探索成长期、成熟追求期、疲惫衰退期。

接触适应期：用户开始了解产品、体验产品，从第一次下载到第一次退出。这段时间用户熟悉了产品的视觉风格、交互流程和体验、尝试新鲜功能等，截止用户第二次登录，就算是完成了接触期，这部分用户会容易流失。

探索成长期：用户从选择喜欢产品到添加商品到购物车并完成付款再到最后的确认收货完成评论。通过该平台完成了五到十次完整的交易流程属于成长期，这部分用户不太容易流失。

成熟追求期：当用户的购物频率达到一定数后且相对比较稳定且购买商品基本涵盖了商城了一定百分比(30%)，用户通过该平台影响着他的生活或工作，对产品的依赖性比较强，这部分粘度较高的用户可以被称为追求期，这部分用户是不容易流失的。

疲惫衰退期：用户逐渐丧失了对产品的使用欲望，对主要功能(购物)的行为减少，可以从用户打开APP次数、浏览商品时长、订单情况等很少有，这部分用户极有可能正在流失。



流失可以分为：刚性流失、受挫流失、自然流失、市场流失等


刚性流失：因素有产品的定位和目标用户群体不一致，产品特性没有吸引到用户，没有产品共鸣，如设计风格、商品种类、功能完善性等。这部分用户很难避免流失率较高。

受挫流失：因素有操作流程复杂、产品并没有给其用户带来便利适得其反、帮助文档不够稳定、APP体验差等。

自然流失：现有功能不能够满足用户的需求，熟悉产品后进入疲惫期，不能够满足用户的兴趣造成的流失，产品迭代慢，没有创新点。之外还有遗忘账号密码和更换账号等。

市场流失：竞品出现、国家政策限制等


模型 -- 流失率(Churn Rate)

用户可能流失概率计算公式：

用户可能流失率(CR) = CRa * CRb * CRc * CRd * CRe * CRf * ··· *CRn （用户可能流失率由若干条件下的流失率乘积）


分别如下(如上小写与如下大写字母对应)
A：最近一次打开时间，时间间隔越长则说明其CRa越大（以下条件都在该时间段范围内）

B：浏览页面数量和页面深度，浏览页面数量越少，或者深度越浅，则说明其CRb越大

C：浏览页面时长，时长越短，则说明其CRc越大

D：用户浏览商品并将其添加到购物车，添加商品数量(种类)越少，购物车总数量越少,则说明其CRd越大

E：提交订单但是没有支付成功，为支付订单数量越多，则说明其CRe越大

F：近1-3个月的交易记录，订单量越少，则说明其CRf越大

G： 最近订单记录中有没有使用红包策略，次数限制。
……



整体流失率占比计算公式 用户流失率= 总用户流失量/总用户量



红包策略

方案一

防流失用户群体：处于成长期的用户，有过一次购买记录之后。根据流失率模型可以计算得 CR >= 0.4 针对这部分用户采取发红包策略

红包金额： 根据用户最近的的订单量、订单金额、流失率 作随增算法，即用户订单量越多，金额越高，其流失率越大则红包金额也越大，最高不超过20

按照最大红包算，可以带动用户量为：n = 100W ／ 20（5W）
而一般的实际能够领取的金额都在 1-3 只有少数


方案二

红包采用：虚拟红包

什么是虚拟红包呢？大概是这样子的

用户进入APP，自动充值（也可以依据用户浏览页面刷红包）在用户的账户上并告知用户有虚拟红包。（红包金额依据防流失模型计算得出，同方案一的红包金额计算规则）

虚拟红包如何使用呢？

重置给用户的虚拟红包是未激活状态，需要在用户支付成功之后才会自动给激活(或者需要领取)（根据订单金额决定是否能够激活用户有效的红包数量）

激活的红包可以在下次支付时候抵扣订单金额




红包策略方案对比

相同点：
1、挽留流失用户，需要对流失用户进行红包刺激，最终目的是为了提高日活用户数，增加订单转化率，提高收入。

不同点：
1、方案一用户的参与感没有方案二多
2、虚拟红包该可以结合AR完，让大家觉得有意思很想参与进来
3、方案一的不可以多发，而方案二则相对可以多发一部分，不一定所有都会参加进来，只要判定之前发的无效则可以继续覆盖更多人群，方案一的金额是一定，也不可以发超了。
4、对于淘宝这样子上市公司，红包直接抵扣会直接影响公司的整体收入，影响财报，间接影响股价。虚拟红包可以走公司的市场费用，对于方案二来说用户第二次也可以采用红包抵扣，但是这相对来说，影响小点。（这里可以损点 领取的红包不可以代扣但可以提现  神策略 ／摊手）
5、技术层面：方案一相对传统，处理好并发和防止红包金额发超即可，方案二新颖，结合AR，让用户主动参与进来，不用担心超发(120%范围内)的情况，可灵活做出调整。虚拟红包可以覆盖更广人群，让更多用户参与进来。


我会选择方案二进行开发

原因是，虚拟红包的产品策略更加容易做好支付系统、订单系统、发红包系统解耦，相对独立分割开，便于做到高内聚低耦合。相比于传统的方案一，红包与订单系统绑定(当然可以分割开的 打脸)，更加方便作调整。

方案二会有很多挑战力，单独拎出来会涉及到 并发、重发、多发、发超、次数限制、被刷(黑客)……







#### 2018年饿了么校园招聘核心竞争力题目第二轮

> 在饿了么平台上，假设每个站点每个订单分配给哪个骑手的信息都会被保存，你可以已知的信息如下: 


运单信息：
运单基础信息：运单编号
时间信息：运单生成时间，运单分配时间，运单预计出餐时间，运单实际出餐时间，运单预计送达时间
匹配信息：运单实际分配的骑手编号
位置信息：运单的出发点(餐厅)的位置信息，运单的结束点(用户)的位置信息 

骑手信息：
骑手编号，分配该运单时该站点所有当时可以送单的骑手所在位置信息及其身上运单的相关信息


1.如何利用上述信息设计一个运单与骑手的匹配模型？ 输入：多个运单信息, 多个骑手信息 输出：运单与骑手的匹配对 

2.如何评价你的模型？ 

3.多个匹配模型之间如何决定哪个匹配模型最优?


我们先对题的表述做一个翻译

对运单信息：
运单号：orderid
运单创建时间：create_time
运单分配时间：distribute_time
预计出餐时间：probable_meal_time
实际出餐时间：actual_meal_time
预计送达时间：probable_arrive_time
商家位置信息：shop_place
运单目的信息：customer_place


对骑手信息：
骑手编号：riderid
骑手背单数(已经有的运单数量)：order_num
骑手位置：rider_place


设计一个运单与骑手的匹配模型，其实也就是路径规划问题，求其最优解。当然我们在考虑实际问题并非这么简单，这里需要考虑很多问题，分别如下：

预计出餐时间如何计算？如何匹配出餐厅附近最优的骑手信息？预计送达时间如何计算？一个运单分配给一个骑手的最优解的权重是什么？……


我们先大致将实际问题分为两类：餐厅画像、骑手模型


餐厅画像：如何计算出一个餐厅的出餐时间，这将是一个很负责也很困难的事情，餐厅的菜品品类、餐厅的顾客率、运单的菜品数量和份数、餐厅原材料、烧菜时间、烧菜顺序、特殊因素等

餐厅的菜品品类：烧一个中餐的时间远远大于KFC做一个汉堡时间，出餐时间根据菜品品类确定；

餐厅顾客率：店里的顾客越多（高峰期）（厨师）占用外卖输出越多，出餐时间将会受影响；

运单菜品数量和份数：菜品数量越多或数量越多，制作（时间）成本越高、出餐时间将会受影响；

餐厅原材料：是否齐全，是否够新鲜（此处可以假设所有都是新鲜的），一般地，如果顾客订购了没有原材料的菜品，餐厅会主动告知。但是这几分钟也会影响到出餐时间；

烧菜时间：这个主要受菜品品类，有的菜烧的时间长，有的可能就是现成的；

烧菜顺序：是按照接单时间还是按照师傅习惯（数量）；

特殊因素：没有燃气了，停水停电、餐厅出了事故等，直接影响出餐时间



骑手模型：计算运单预计送达时间也将是一个系统工程。如下情况一定均需要按场景考虑。 GPS数据采集准确度、骑手的习惯、骑手的能力、对路线熟悉程度、运单准时率、特殊因素（恶劣天气、各种活动、节假日/周末、法定假日、电动车设备问题等）、意外（车祸）等


GPS数据采集准确度：大城市的交通就很复杂了，但最复杂的可能还是CBD，顾客在大楼里，GPS并不能够百分百精确到顾客（工位），所以多数据采样的准确度要高，我们首先有一个聚类，把那些误差比较大的先去掉，然后通过聚类以后把GPS位点弄到POI上，match到一个点上。我们做同样的事情，去掉绝大多数噪音。第二个是轨迹聚类，当你知道行程起点和终点以后必须要知道轨迹，右边的图刚好是一条河，这个很讨厌，我们很多时候不知道，也无法预测骑手怎么走，有的可能走小路，有的不知道走大路，所以预测的时候比较困难。

骑手的习惯：骑手不按照分配先后顺序进行配送，这也会导致与预期的运送时间不符。

骑手的能力：骑车的速度（这个还真分人），可以通过他历史运单情况计算出。

对路线熟悉程度：除了依赖GPS导航，还也可以掌握小区、大厦内部的结果，如进去了出不来也是一件尴尬的事情。

运单准时率和特殊因素也不得不在计算预计时间要考虑的。


这两类都不是线性模型的。对于其中的餐厅，还不能够满足平台所有的，还需要考虑地区，要实现当地化和本地化，每个地区都应该有独立特殊的模型，如小城镇骑手和运单需求都少、大城市运单量大骑手人数多。一个运单分配一个骑手对该骑手的其他订单不受影响。


最后我们可以将这个问题转化成 N个运单、N个骑手，将一个运单分配一个骑手且达到最优，一个骑手对应多个运单。
这是一个二维矩阵，简单讲是一个代价矩阵。当决定把一个单分给骑手的时候，代价是其他单不会因此受影响，也不希望他距离跑太长，因为电动车跑两公里送一单肯定是最坏的选择。所以我们最开始用规则的方法，通过大量的离线分析，比如讲餐厅画像和骑手模型的因素给予一定的权重，算出来以后，后面是优化问题，最后的结果是得到右边的矩阵。

一个订单分给了这个骑手，匹配用的什么算法？可以采用比较成熟的最优匹配KM算法，KM算法求的是完备匹配下最大权匹配，KM算法也有很多流程，和开始的VRP解决方案比较接近，不断优化。最开始算法流程初始化可行顶标的值，用匈牙利算法寻找完备匹配。



上面的方案要考虑的因素多：
设计内容和知识广：涉及到机器学习、深度学习、各个模型，对数学和编程等都有较高的要求，这方面需要有专业的人才去做。
要求计算能力高：对算法要求高、对机器配置、如何让硬件和软件配合达到最优。
GPS数据采样难：可以与WI-FI结合，难度大。
特殊因素等




多个匹配模型之间如何决定哪个匹配模型最优?

我们按照每个地区都有一个独立的模型，不同地区之前很难去比较得出最优的匹配模型。但是在相同的地区可以根据我们预计的出餐时间准确率、预计送达时间准确率、顾客满意度、骑手工作量、骑手工作总量。

我们预计的出餐时间准确率越高说明我们的模型对该地区是最优的。

我们预计送达的时间准确率越高说明我们的模型对该地区是最优的。

单个骑手的一段时间的工作量、该地区一段时间工作总量，可以用 运单数量 来衡量。

我们也可以通过顾客的评价来统计出该地区采用的该模型的转化度。





#### 大前端一面

> 现场面试 2017-09-21 挂。虽然拿到快通卡，特别想去饿了么，有些遗憾。

- 简单问了项目？

- 然后就是写代码

整个面试过程很糟糕，没戏。





